#!/usr/bin/env bash
set -eo pipefail
[[ $DOKKU_TRACE ]] && set -x

export TRAEFIK_IMAGE=${TRAEFIK_IMAGE:="traefik"}
export TRAEFIK_IMAGE_VERSION=${TRAEFIK_IMAGE_VERSION:="v3.0.1"}

export PLUGIN_COMMAND_PREFIX="traefik"
export PLUGIN_DISABLE_PULL=${TRAEFIK_DISABLE_PULL:=}
export PLUGIN_DISABLE_PULL_VARIABLE="TRAEFIK_DISABLE_PULL"
export PLUGIN_IMAGE=$TRAEFIK_IMAGE
export PLUGIN_IMAGE_VERSION=$TRAEFIK_IMAGE_VERSION
export PLUGIN_DATA_ROOT=${PLUGIN_DATA_ROOT:="$DOKKU_LIB_ROOT/services/$PLUGIN_COMMAND_PREFIX"}
export TRAEFIK_DATA_ROOT=${TRAEFIK_DATA_ROOT:="$PLUGIN_DATA_ROOT"}

export DOKKU_LETSENCRYPT_EMAIL=${DOKKU_LETSENCRYPT_EMAIL:=}

export PLUGIN_CONTAINER_NAME="dokku.traefik"
